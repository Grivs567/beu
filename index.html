<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>NEURAL PULSE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/tsparticles@3/tsparticles.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.148/build/three.min.js"></script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { 
  height: 100%; 
  overflow: hidden; 
  background: #000; 
  font-family: 'Segoe UI', monospace; 
  color: #fff; 
  cursor: crosshair;
  -webkit-tap-highlight-color: transparent;
}

#scene { 
  position: fixed; 
  inset: 0; 
  z-index: 1; 
  background: radial-gradient(circle at 50% 50%, #0a0a1a, #000);
}

#intro { 
  position: fixed; 
  inset: 0; 
  background: #000; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  z-index: 100; 
  animation: pulseBg 2s infinite alternate;
}

#intro h1 { 
  font-size: clamp(2rem, 5vw, 4rem); 
  text-transform: uppercase; 
  letter-spacing: 0.3em; 
  background: linear-gradient(45deg, #ff00ff, #00ffff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
  animation: neonPulse 1.5s ease-in-out infinite alternate;
}

#counter { 
  position: fixed; 
  top: 20px; 
  right: 20px; 
  font-size: 1.5rem; 
  color: #00ffff; 
  z-index: 10; 
  font-weight: bold;
}

#pulseButton { 
  position: fixed; 
  bottom: 30px; 
  left: 50%; 
  transform: translateX(-50%); 
  padding: 15px 40px; 
  background: linear-gradient(45deg, #ff00ff, #00ffff); 
  border: none; 
  border-radius: 50px; 
  color: white; 
  font-size: 1.2rem; 
  font-weight: bold; 
  cursor: pointer; 
  z-index: 10; 
  box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
  animation: buttonGlow 2s infinite alternate;
  transition: transform 0.3s, box-shadow 0.3s;
}

#pulseButton:hover { 
  transform: translateX(-50%) scale(1.1); 
  box-shadow: 0 0 50px rgba(255, 0, 255, 0.8);
}

#energyBar { 
  position: fixed; 
  top: 20px; 
  left: 20px; 
  width: 200px; 
  height: 10px; 
  background: rgba(255, 255, 255, 0.1); 
  border-radius: 5px; 
  overflow: hidden; 
  z-index: 10;
}

#energyFill { 
  width: 0%; 
  height: 100%; 
  background: linear-gradient(90deg, #00ffff, #ff00ff); 
  transition: width 0.5s;
}

#instructions { 
  position: fixed; 
  top: 50%; 
  left: 50%; 
  transform: translate(-50%, -50%); 
  text-align: center; 
  font-size: 1.5rem; 
  z-index: 5; 
  opacity: 0.8;
}

#clickIndicator { 
  position: fixed; 
  width: 100px; 
  height: 100px; 
  border-radius: 50%; 
  border: 3px dashed #00ffff; 
  pointer-events: none; 
  z-index: 3; 
  animation: spin 10s linear infinite;
}

#reactor { 
  position: fixed; 
  width: 300px; 
  height: 300px; 
  border-radius: 50%; 
  background: radial-gradient(circle, rgba(255, 0, 255, 0.2), transparent 70%); 
  pointer-events: none; 
  z-index: 2; 
  opacity: 0;
}

@keyframes pulseBg {
  0% { background: #000; }
  100% { background: #0a0a1a; }
}

@keyframes neonPulse {
  0% { text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff; }
  100% { text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff; }
}

@keyframes buttonGlow {
  0% { box-shadow: 0 0 20px rgba(255, 0, 255, 0.5); }
  100% { box-shadow: 0 0 40px rgba(0, 255, 255, 0.7); }
}

@keyframes spin {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}
</style>
</head>

<body>

<div id="scene"></div>
<div id="intro"><h1>NEURAL PULSE</h1></div>
<div id="counter">00000</div>
<div id="energyBar"><div id="energyFill"></div></div>
<div id="instructions">CLICK ANYWHERE → FEED THE SYSTEM</div>
<div id="clickIndicator"></div>
<div id="reactor"></div>
<button id="pulseButton">PULSE NOW</button>

<script>
// ==================== IMMEDIATE ENGAGEMENT ====================
let clickCount = 0;
let energy = 0;
let isPlaying = false;
const audio = new Audio('https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3');
audio.loop = true;
audio.volume = 0;

// ==================== PARTICLE SYSTEM ====================
tsParticles.load("scene", {
  particles: {
    number: { value: 30 },
    color: { value: ["#ff00ff", "#00ffff"] },
    opacity: { value: 0.8 },
    size: { value: { min: 2, max: 5 } },
    move: { 
      enable: true, 
      speed: 1,
      direction: "outside",
      outModes: "bounce"
    },
    links: {
      enable: true,
      distance: 100,
      color: "#ffffff",
      opacity: 0.2
    }
  },
  interactivity: {
    events: {
      onClick: { enable: true, mode: "push" },
      onHover: { enable: true, mode: "repulse" }
    }
  }
});

// ==================== START EXPERIENCE ====================
function startExperience() {
  if (isPlaying) return;
  isPlaying = true;
  
  // Remove intro
  gsap.to("#intro", { opacity: 0, duration: 0.5, onComplete: () => {
    document.getElementById("intro").remove();
  }});
  
  // Start audio
  audio.play();
  gsap.to(audio, { volume: 0.3, duration: 2 });
  
  // Animate instructions
  gsap.to("#instructions", { 
    y: -50, 
    duration: 2, 
    ease: "power2.out",
    opacity: 1 
  });
  
  // Show click indicator
  document.getElementById("clickIndicator").style.display = "block";
  
  // Start heartbeat
  setInterval(heartbeat, 1000);
}

// ==================== HEARTBEAT SYSTEM ====================
function heartbeat() {
  if (energy > 0) {
    energy = Math.max(0, energy - 5);
    updateEnergyBar();
    
    // Visual pulse
    gsap.to("#scene", {
      background: "radial-gradient(circle at 50% 50%, #1a0a2a, #000)",
      duration: 0.5,
      yoyo: true,
      repeat: 1
    });
  }
}

// ==================== CLICK HANDLER ====================
function handleClick(x, y, isButton = false) {
  clickCount++;
  
  // Update counter with animation
  const counter = document.getElementById("counter");
  counter.textContent = String(clickCount).padStart(5, '0');
  gsap.to(counter, { 
    scale: 1.2, 
    color: isButton ? "#ff00ff" : "#00ffff",
    duration: 0.2, 
    yoyo: true 
  });
  
  // Add energy
  energy = Math.min(100, energy + (isButton ? 20 : 10));
  updateEnergyBar();
  
  // Create visual effect
  createClickEffect(x, y, isButton);
  
  // Audio feedback
  if (audio.volume < 0.7) {
    audio.volume = Math.min(0.7, audio.volume + 0.02);
  }
  
  // Particle explosion
  tsParticles.load("scene", {
    particles: {
      number: { value: 50 + clickCount },
      color: { value: isButton ? "#ff00ff" : "#00ffff" },
      move: { speed: 2 + (clickCount * 0.1) },
      links: { distance: 100 + clickCount }
    }
  });
  
  // Show reactor on high energy
  if (energy > 70) {
    showReactor(x, y);
  }
  
  // Random message
  if (Math.random() > 0.7) {
    showRandomMessage();
  }
}

function createClickEffect(x, y, isButton) {
  const effect = document.createElement("div");
  effect.style.cssText = `
    position: fixed;
    left: ${x}px;
    top: ${y}px;
    width: 0px;
    height: 0px;
    border-radius: 50%;
    background: radial-gradient(circle, ${isButton ? "#ff00ff" : "#00ffff"}, transparent);
    pointer-events: none;
    z-index: 5;
  `;
  document.body.appendChild(effect);
  
  gsap.to(effect, {
    width: "200px",
    height: "200px",
    opacity: 0,
    duration: 1,
    onComplete: () => effect.remove()
  });
}

function updateEnergyBar() {
  document.getElementById("energyFill").style.width = `${energy}%`;
  
  // Change color based on energy
  const colors = energy > 70 ? ["#ff00ff", "#ff0000"] : 
                  energy > 40 ? ["#00ffff", "#ff00ff"] : 
                  ["#00ffff", "#0088ff"];
  
  document.getElementById("energyFill").style.background = 
    `linear-gradient(90deg, ${colors[0]}, ${colors[1]})`;
}

function showReactor(x, y) {
  const reactor = document.getElementById("reactor");
  reactor.style.left = `${x}px`;
  reactor.style.top = `${y}px`;
  
  gsap.to(reactor, {
    opacity: 0.5,
    scale: 1.5,
    duration: 1,
    onComplete: () => {
      gsap.to(reactor, {
        opacity: 0,
        scale: 1,
        duration: 0.5
      });
    }
  });
}

function showRandomMessage() {
  const messages = [
    "FEED ME MORE",
    "SYSTEM OVERLOAD",
    "NEURAL CONNECTION ACTIVE",
    "PULSE DETECTED",
    "ENERGY SURGE",
    "CRITICAL MASS ACHIEVED"
  ];
  
  const msg = document.createElement("div");
  msg.textContent = messages[Math.floor(Math.random() * messages.length)];
  msg.style.cssText = `
    position: fixed;
    top: ${30 + Math.random() * 40}%;
    left: ${20 + Math.random() * 60}%;
    color: #ff00ff;
    font-size: ${1 + Math.random()}rem;
    font-weight: bold;
    pointer-events: none;
    z-index: 10;
    opacity: 0;
  `;
  document.body.appendChild(msg);
  
  gsap.to(msg, {
    opacity: 1,
    y: -50,
    duration: 1,
    onComplete: () => {
      gsap.to(msg, {
        opacity: 0,
        duration: 0.5,
        onComplete: () => msg.remove()
      });
    }
  });
}

// ==================== EVENT LISTENERS ====================
// Start on ANY interaction
document.addEventListener('click', (e) => {
  if (!isPlaying) {
    startExperience();
    handleClick(e.clientX, e.clientY);
  } else {
    handleClick(e.clientX, e.clientY);
  }
});

document.addEventListener('touchstart', (e) => {
  if (!isPlaying) {
    startExperience();
    handleClick(e.touches[0].clientX, e.touches[0].clientY);
  } else {
    handleClick(e.touches[0].clientX, e.touches[0].clientY);
  }
});

// Button click
document.getElementById("pulseButton").addEventListener("click", (e) => {
  e.stopPropagation();
  handleClick(e.clientX, e.clientY, true);
  
  // Button animation
  gsap.to("#pulseButton", {
    scale: 1.3,
    duration: 0.2,
    yoyo: true
  });
});

// Mouse move effects
document.addEventListener("mousemove", (e) => {
  // Move click indicator
  const indicator = document.getElementById("clickIndicator");
  indicator.style.left = `${e.clientX}px`;
  indicator.style.top = `${e.clientY}px`;
  
  // Particle repulse effect
  if (isPlaying && Math.random() > 0.8) {
    tsParticles.load("scene", {
      particles: {
        move: { speed: 1 + energy/50 }
      }
    });
  }
});

// Keyboard support
document.addEventListener("keydown", (e) => {
  if (e.code === "Space") {
    handleClick(window.innerWidth/2, window.innerHeight/2, true);
  }
});

// Mobile tap indicator
if ('ontouchstart' in window) {
  document.body.style.cursor = "pointer";
  document.getElementById("instructions").textContent = "TAP ANYWHERE → FEED THE SYSTEM";
}

// ==================== PROGRESSIVE DIFFICULTY ====================
setInterval(() => {
  if (isPlaying && energy < 30 && clickCount > 10) {
    document.getElementById("instructions").textContent = 
      clickCount > 50 ? "DON'T STOP NOW → SYSTEM DEPENDS ON YOU" :
      clickCount > 20 ? "KEEP GOING → ENERGY DROPPING" :
      "CLICK FASTER → ENERGY LOW";
    
    gsap.to("#instructions", {
      color: "#ff0000",
      duration: 0.5,
      yoyo: true
    });
  }
}, 3000);

// ==================== START PULSE ====================
// Auto-start after 3 seconds
setTimeout(() => {
  if (!isPlaying) {
    document.getElementById("instructions").innerHTML = 
      "⚠️ CLICK NOW OR SYSTEM WILL SHUTDOWN ⚠️";
    gsap.to("#instructions", {
      scale: 1.1,
      duration: 0.5,
      repeat: 3
    });
  }
}, 3000);
</script>

</body>
</html>
